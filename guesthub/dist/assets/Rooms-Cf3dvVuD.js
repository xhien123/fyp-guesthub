import{R as r,f as B,a as L,j as e,L as g,u as I}from"./index-DGXRDi1R.js";import{S as O,J as D,P as U,R as F,a as P,b as M,G as $,F as G,D as T}from"./Superior-d2p0riqR.js";const H="/assets/Room%20background%20hero-bgwrLZHC.jpg",_="https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?q=80&w=1200&auto=format&fit=crop",v={"DELUXE OCEAN VIEW":T,"FAMILY SUITE":G,"GARDEN BUNGALOW":$,"STANDARD TWIN":M,"PLUNGE POOL VILLA":P,"ROYAL SUITE":F,"PRESIDENTIAL ROOM":U,"JUNIOR SUITE":D,SUPERIOR:O},z=H,V=t=>{const o=(t.title||t.name||"").toUpperCase();return o&&v[o]?v[o]:Array.isArray(t.photos)&&t.photos.length>0?t.photos[0]:_},j=t=>(t.title||t.name||"Room").toUpperCase(),Y=t=>(t&&t.trim()?t:"room").toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),q=t=>{const o=j(t);return`${Y(o)}-${String(t._id??"")}`},J=t=>!!t._id,W=(t,o=150)=>t?t.length>o?t.slice(0,o)+"...":t:"Experience unparalleled luxury with bespoke furnishings, expansive ocean views, and our signature anticipatory service.",K=(t,o="USD")=>t==null?"":Intl.NumberFormat("en-US",{style:"currency",currency:o,minimumFractionDigits:0,maximumFractionDigits:0}).format(Number(t)),X=({isOpen:t,onClose:o})=>{if(!t)return null;const c=I();return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",onClick:o,children:e.jsxs("div",{className:"bg-white shadow-2xl w-full max-w-lg",onClick:d=>d.stopPropagation(),children:[e.jsx("div",{className:"p-6 bg-stone-800 text-white",children:e.jsx("h2",{className:"text-xl font-serif font-bold",children:"Active Booking Found"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-stone-700",children:"Our records indicate you already have an active reservation (Pending, Confirmed, or Checked-in)."}),e.jsx("p",{className:"text-sm text-stone-600",children:"To ensure the highest quality of service, we only permit one active booking per guest. You may modify your existing booking from your profile."})]}),e.jsxs("div",{className:"flex justify-end gap-4 p-4 bg-stone-50 border-t border-stone-200",children:[e.jsx("button",{type:"button",onClick:()=>c("/"),className:"px-6 py-2 font-semibold text-stone-700 border border-stone-300 bg-white hover:bg-stone-100 transition",children:"Return Home"}),e.jsx("button",{type:"button",onClick:()=>c("/profile?sec=upcoming"),className:"px-6 py-2 font-semibold text-white transition bg-amber-700 hover:bg-amber-600",children:"View Your Booking"})]})]})})},ee=()=>{const[t,o]=r.useState([]),[c,d]=r.useState(!0),[u,p]=r.useState(null),[N,y]=r.useState(!1),[k,f]=r.useState(!1);r.useEffect(()=>{(async()=>{d(!0),p(null);try{const s={},[n,x]=await Promise.all([B(s),L().catch(()=>null)]);x&&x._id&&y(!0);const m=Array.isArray(n)?n:n?.rooms||[];o(m)}catch(s){console.error("Failed to fetch rooms:",s),p(s?.response?.data?.error||"Failed to load rooms")}finally{d(!1)}})()},[]);const R=(s,n)=>{if(!n){s.preventDefault();return}N&&(s.preventDefault(),f(!0))};return e.jsxs(e.Fragment,{children:[e.jsx(X,{isOpen:k,onClose:()=>f(!1)}),e.jsxs("div",{className:"bg-white",children:[e.jsxs("section",{className:"relative h-[60vh] min-h-[400px] w-full overflow-hidden",children:[e.jsx("img",{src:z,alt:"GuestHub Resort Hero",className:"absolute inset-0 h-full w-full object-cover",loading:"eager"}),e.jsx("div",{className:"absolute inset-0 bg-black/60"}),e.jsx("div",{className:"relative z-10 flex h-full items-end",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full px-6 pb-12",children:[e.jsx("nav",{"aria-label":"breadcrumb",className:"text-white/90 text-sm mb-2 font-light tracking-wider",children:e.jsxs("ol",{className:"flex gap-2 items-center",children:[e.jsx("li",{children:e.jsx(g,{to:"/",className:"underline hover:no-underline font-light",children:"Home"})}),e.jsx("li",{"aria-hidden":!0,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),e.jsx("li",{className:"font-semibold uppercase text-amber-300",children:"Rooms & Suites"})]})}),e.jsx("h1",{className:"font-serif text-6xl md:text-8xl font-thin italic text-white tracking-tight drop-shadow-lg mb-4",children:"Accommodations"}),e.jsx("p",{className:"text-left text-xl font-light text-white max-w-3xl drop-shadow hidden md:block",children:"A collection of bespoke spaces, each designed to serve as your private sanctuary, connecting you seamlessly with the sea and sky of Da Nang."})]})})]}),e.jsxs("section",{className:"max-w-7xl mx-auto px-4 py-16 md:py-24",children:[c&&e.jsx("p",{className:"text-center text-lg text-stone-700",children:"Loading our exclusive residences..."}),u&&e.jsxs("p",{className:"text-center text-lg text-red-600",children:["Error: ",u]}),!c&&!u&&t.length===0&&e.jsx("p",{className:"text-center text-lg text-stone-600",children:"No rooms available to display."}),e.jsx("ul",{className:"grid gap-12 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:t.map((s,n)=>{const x=V(s),m=j(s),l=J(s),S=l?q(s):"#",i=n===0,b=s.pricePerNight,a=s.available??!0,w="w-full text-center px-4 py-3 font-semibold uppercase tracking-widest transition-colors ",A=w+(i?"text-sm ":"text-xs ")+(l&&a?"bg-amber-700 text-white hover:bg-amber-800 shadow-md":"bg-stone-200 text-stone-400 cursor-not-allowed"),C=w.replace("font-semibold","font-medium")+(i?"text-sm ":"text-xs ")+(l&&a?"border-stone-300 bg-white hover:bg-stone-50 text-stone-800 border":"border-stone-200 bg-stone-100 text-stone-400 cursor-not-allowed border"),E="font-serif font-light text-stone-900 tracking-wide uppercase "+(i?"text-3xl":"text-xl");return e.jsxs("li",{className:`bg-white shadow-xl transition-all duration-300 overflow-hidden border border-stone-100 relative
                    ${i?"lg:col-span-3 lg:flex lg:h-96":"lg:col-span-1 group"}
                    ${a?"hover:shadow-2xl":""}
                  `,children:[!a&&e.jsx("div",{className:"absolute inset-0 z-30 bg-white/60 backdrop-blur-[3px] flex flex-col items-center justify-center text-center p-6",children:e.jsxs("div",{className:"bg-white/90 border border-stone-300 shadow-2xl p-6 rounded-lg transform rotate-[-2deg] max-w-xs",children:[e.jsx("span",{className:"block text-xl font-serif font-bold text-stone-800 mb-1",children:"Currently Unavailable"}),e.jsx("span",{className:"text-xs text-stone-500 uppercase tracking-widest font-medium",children:"Sold Out / Maintenance"})]})}),e.jsxs("figure",{className:`relative aspect-[4/3] overflow-hidden ${i?"lg:aspect-auto lg:h-full lg:w-2/3":"group"}`,children:[e.jsx("img",{src:x,alt:m,className:`h-full w-full object-cover transition-transform duration-500 
                        ${a?i?"hover:scale-100":"group-hover:scale-105":"grayscale opacity-60"}
                      `,loading:"lazy"}),l&&b!=null&&a&&e.jsxs("span",{className:"absolute top-4 right-4 bg-stone-900/80 text-white px-4 py-2 text-sm font-semibold tracking-widest rounded-sm",children:[K(b),"/Night"]})]}),e.jsxs("div",{className:`p-6 space-y-4 ${i?"lg:w-1/3 flex flex-col justify-between":""} ${a?"":"opacity-50 pointer-events-none"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:E,children:m}),s.maxGuests&&e.jsxs("span",{className:"text-xs font-semibold uppercase tracking-wider text-amber-700 bg-amber-100 px-3 py-1 rounded-sm whitespace-nowrap ml-4",children:[e.jsx("span",{"aria-hidden":"true",children:"ðŸ‘¤"})," Sleeps"," ",s.maxGuests]})]}),e.jsx("p",{className:`text-stone-700 leading-relaxed text-sm ${i?"text-base":""}`,children:W(s.description)})]}),e.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[e.jsx(g,{to:l&&a?`/book?roomId=${encodeURIComponent(String(s._id))}`:"#","aria-disabled":!l||!a,onClick:h=>R(h,l&&a),className:A,children:a?"Secure Your Booking":"Booking Closed"}),e.jsx(g,{to:S,"aria-disabled":!l||!a,onClick:h=>(!l||!a)&&h.preventDefault(),className:C,children:"View Exclusive Details"})]})]})]},l?s._id:`placeholder-${n}`)})})]})]})]})};export{ee as default};
