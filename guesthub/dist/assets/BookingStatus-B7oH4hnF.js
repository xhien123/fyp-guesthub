import{b as v,R as x,j as e,L as f,o as N}from"./index-DGXRDi1R.js";const n="amber-700",y=["Pending","Confirmed","Checked-in","Checked-out"],w=({current:l,steps:t})=>{const c=t.findIndex(a=>a===l);return e.jsx("ol",{className:"grid grid-cols-4 gap-2",children:t.map((a,s)=>{const r=s<=c,i=s===c;return e.jsxs("li",{className:"flex flex-col items-center justify-start relative pt-6 pb-2 transition-all duration-500",children:[e.jsx("div",{className:`absolute top-2 w-full h-[3px] transition-colors duration-500 ${s===0?"left-1/2 w-1/2":""} ${s===t.length-1?"right-1/2 w-1/2":""} ${s>0&&s<t.length-1?"w-full":""}`,style:{backgroundColor:r&&s>0?"#b45309":"#d6d3d1"}}),e.jsx("div",{className:`absolute top-0 flex h-7 w-7 items-center justify-center rounded-full border-2 transition-all duration-500 ${i?`bg-white border-${n}`:r?`bg-${n} border-${n}`:"bg-stone-100 border-stone-300"}`,children:e.jsx("span",{className:`text-sm ${r?i?`text-${n}`:"text-white":"text-stone-500"}`,children:i?"•":r?"✓":s+1})}),e.jsx("div",{className:`mt-4 text-center text-xs font-semibold uppercase tracking-wider ${r?`text-${n}`:"text-stone-500"}`,children:a})]},a)})})},$=()=>{const{id:l}=v(),[t,c]=x.useState(null),[a,s]=x.useState(!0),[r,i]=x.useState(null),j=o=>o==null?"—":`${Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(Number(o))}`;if(x.useEffect(()=>{let o;const p=async()=>{try{i(null);const u=await N.get(`/api/bookings/${l}`,{withCredentials:!0});c(u.data)}catch(u){i(u?.response?.data?.error||"Failed to load booking status")}finally{s(!1)}};return p(),o=window.setInterval(p,5e3),()=>{o&&window.clearInterval(o)}},[l]),a)return e.jsx("p",{className:"text-center py-12 text-lg text-stone-700",children:"A moment while we retrieve your reservation details..."});if(r)return e.jsxs("p",{className:"text-center py-12 text-xl text-red-600",children:["Error: ",r]});if(!t)return e.jsx("p",{className:"text-center py-12 text-xl text-red-600",children:"Reservation not found."});const h=typeof t.room=="string"?t.room:t.room?.title,g=Math.max(0,Math.round((new Date(t.checkOut).setHours(0,0,0,0)-new Date(t.checkIn).setHours(0,0,0,0))/(1e3*60*60*24)))||1;let b={},d;try{t.notes&&(b=JSON.parse(t.notes),d=b.uiEstimateUSD)}catch{}const m=(o=>{switch(o){case"Pending":return{title:"Confirmation Pending: Anticipation Builds",message:"Your exclusive reservation has been successfully received. Our dedicated concierge team is now reviewing your request and will provide 'Confirmed' status shortly. Please check back in a few minutes.",color:"border-yellow-500 bg-yellow-50 text-yellow-800"};case"Confirmed":return{title:"Reservation Confirmed: Your Sanctuary Awaits",message:`The ${h||"residence"} is secured! We look forward to welcoming you on ${new Date(t.checkIn).toDateString()}. A detailed confirmation has been sent to your email.`,color:"border-green-500 bg-green-50 text-green-800"};case"Checked-in":return{title:"Welcome Home: Enjoy Your Stay",message:"You are currently checked in and enjoying your luxurious retreat. Should you require any assistance, please contact the Front Desk directly.",color:"border-blue-500 bg-blue-50 text-blue-800"};case"Checked-out":return{title:"Experience Concluded: Thank You",message:"Thank you for choosing us for your stay. We hope your experience was exceptional and we look forward to welcoming you back soon.",color:"border-stone-500 bg-stone-50 text-stone-800"};default:return{title:"Status Update Required",message:"We are having trouble retrieving the latest status. Please contact our front desk.",color:"border-red-500 bg-red-50 text-red-800"}}})(t.status);return e.jsxs("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8 space-y-8",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-stone-200 pb-4",children:[e.jsx("h1",{className:"font-serif text-4xl font-thin italic text-stone-900 tracking-tight",children:"Your Reservation Status"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{to:`/bookings/${t._id}`,className:"border border-stone-300 text-stone-700 px-5 py-2 text-sm font-semibold hover:bg-stone-50 transition",children:"View Full Details"}),e.jsx("button",{disabled:!0,className:"bg-amber-700 text-white px-5 py-2 text-sm font-semibold transition opacity-50 cursor-default",children:"Track Live Status"}),e.jsx(f,{to:"/profile",className:"border border-stone-300 text-stone-700 px-5 py-2 text-sm font-semibold hover:bg-stone-50 transition",children:"My Profile"})]})]}),e.jsxs("div",{className:"border border-stone-200 bg-white p-8 shadow-2xl space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pb-4 border-b border-stone-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase tracking-wider text-stone-500",children:"Residence"}),e.jsx("div",{className:"text-lg font-semibold text-stone-900",children:h||"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase tracking-wider text-stone-500",children:"Guests"}),e.jsxs("div",{className:"text-lg font-semibold text-stone-900",children:[t.guests," Pax"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase tracking-wider text-stone-500",children:"Nights"}),e.jsx("div",{className:"text-lg font-semibold text-stone-900",children:g})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase tracking-wider text-stone-500",children:"Booking ID"}),e.jsx("div",{className:"text-sm font-medium text-stone-700",children:t._id})]})]}),e.jsx(w,{current:t.status,steps:y}),e.jsxs("div",{className:`border-l-4 p-5 shadow-inner ${m.color}`,children:[e.jsx("h3",{className:"text-lg font-bold mb-1",children:m.title}),e.jsx("p",{className:"text-sm",dangerouslySetInnerHTML:{__html:m.message.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")}})]}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-6 pt-4 border-t border-stone-100",children:[e.jsxs("div",{className:"border border-stone-300 p-4 bg-stone-50",children:[e.jsx("div",{className:"text-xs uppercase tracking-wider text-stone-500",children:"Check-in"}),e.jsx("div",{className:"font-semibold text-lg text-stone-800",children:new Date(t.checkIn).toLocaleString([],{dateStyle:"short",timeStyle:"short"})})]}),e.jsxs("div",{className:"border border-stone-300 p-4 bg-stone-50",children:[e.jsx("div",{className:"text-xs uppercase tracking-wider text-stone-500",children:"Check-out"}),e.jsx("div",{className:"font-semibold text-lg text-stone-800",children:new Date(t.checkOut).toLocaleString([],{dateStyle:"short",timeStyle:"short"})})]}),e.jsxs("div",{className:"border border-amber-300 p-4 bg-amber-50",children:[e.jsx("div",{className:"text-xs uppercase tracking-wider text-amber-800",children:"Estimated Total (USD)"}),e.jsx("div",{className:"font-bold text-xl text-amber-800",children:d?j(d):"—"}),d&&e.jsxs("div",{className:"text-xs text-amber-700 pt-1",children:["(",g," nights)"]})]})]}),e.jsxs("div",{className:"border border-stone-200 p-4 text-center bg-stone-50",children:[e.jsx("div",{className:"text-sm text-stone-600",children:"Your Dedicated Concierge: Need assistance or have a special request?"}),e.jsxs("div",{className:"font-medium text-stone-800 mt-1",children:["Call: ",e.jsx("span",{className:`text-${n}`,children:"+84 236 555 8888"})," • Email: ",e.jsx("span",{className:`text-${n}`,children:"reservations@guesthub.com"})]})]})]})]})};export{$ as default};
