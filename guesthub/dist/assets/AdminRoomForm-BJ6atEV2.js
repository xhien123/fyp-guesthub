import{u as g,r as d,j as e}from"./index-CtBX9Jbf.js";function j({initial:t,onSubmit:x,submitting:i}){const p=g(),[c,m]=d.useState(""),[s,l]=d.useState({title:"",type:"Villa",pricePerNight:"",maxGuests:"",beds:"",amenities:"",photos:"",description:"",available:!0});d.useEffect(()=>{t&&l({title:t.title||"",type:t.type||"Villa",pricePerNight:t.pricePerNight?String(t.pricePerNight):"",maxGuests:t.maxOccupancy?String(t.maxOccupancy):t.maxGuests?String(t.maxGuests):"",beds:t.beds?String(t.beds):"",amenities:t.amenities?t.amenities.join(", "):"",photos:t.photos?t.photos.join(", "):"",description:t.description||"",available:t.available??!0})},[t]);const u=async a=>{a.preventDefault(),m("");const h={title:s.title,type:s.type,pricePerNight:Number(s.pricePerNight)||0,maxOccupancy:Number(s.maxGuests)||1,beds:Number(s.beds)||1,amenities:s.amenities.split(",").map(r=>r.trim()).filter(r=>r.length>0),photos:s.photos.split(",").map(r=>r.trim()).filter(r=>r.length>0),description:s.description,available:s.available};try{await x(h)}catch(r){console.error("Form Submission Error:",r);const b=r.response?.data?.message||r.response?.data?.error||"Unknown server error";m(b),window.scrollTo(0,0)}},o="w-full bg-white border border-stone-300 rounded-md px-3 py-2 text-sm text-stone-900 placeholder-stone-400 focus:border-stone-900 focus:ring-1 focus:ring-stone-900 outline-none transition-all",n="block text-xs font-semibold text-stone-600 uppercase tracking-wide mb-1";return e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white border border-stone-200 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-stone-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-stone-900 font-display",children:t?"Edit Residence":"New Residence"}),e.jsx("p",{className:"text-stone-500 text-xs mt-1",children:"Configure room details, pricing, and availability."})]}),e.jsx("div",{className:"text-xs font-mono text-stone-400 bg-stone-50 px-2 py-1 rounded",children:t?`ID: ${t._id?.slice(-6)}`:"DRAFT"})]}),e.jsxs("form",{onSubmit:u,className:"p-8 space-y-8",children:[c&&e.jsx("div",{className:"bg-red-50 border border-red-100 text-red-700 p-4 rounded text-sm",children:c}),e.jsxs("div",{onClick:()=>l({...s,available:!s.available}),className:`group flex items-center gap-5 p-5 border rounded-lg cursor-pointer transition-all duration-300 ${s.available?"bg-emerald-50/30 border-emerald-100":"bg-stone-50 border-stone-200"}`,children:[e.jsx("div",{className:`w-14 h-7 rounded-full relative transition-colors duration-300 shadow-inner ${s.available?"bg-emerald-500":"bg-stone-300"}`,children:e.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow-md transition-all duration-300 ${s.available?"left-8":"left-1"}`})}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-bold uppercase tracking-wide ${s.available?"text-emerald-700":"text-stone-500"}`,children:s.available?"Status: Active":"Status: Stopped"}),e.jsx("div",{className:"text-xs text-stone-500 mt-0.5",children:s.available?"Room is visible to customers and ready for booking.":"Room is hidden on the website. Customers cannot book it."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:n,children:"Room Title"}),e.jsx("input",{type:"text",className:o,placeholder:"e.g. Presidential Ocean Suite",value:s.title,onChange:a=>l({...s,title:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:n,children:"Category"}),e.jsxs("select",{className:o,value:s.type,onChange:a=>l({...s,type:a.target.value}),children:[e.jsx("option",{value:"Villa",children:"Villa"}),e.jsx("option",{value:"Suite",children:"Suite"}),e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Deluxe",children:"Deluxe"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 p-4 bg-stone-50 rounded-md border border-stone-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:n,children:"Rate (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-stone-500 text-sm",children:"$"}),e.jsx("input",{type:"number",min:"0",className:`${o} pl-6`,value:s.pricePerNight,onChange:a=>l({...s,pricePerNight:a.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:n,children:"Occupancy"}),e.jsx("input",{type:"number",min:"1",className:o,value:s.maxGuests,onChange:a=>l({...s,maxGuests:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:n,children:"Bed Count"}),e.jsx("input",{type:"number",min:"1",className:o,value:s.beds,onChange:a=>l({...s,beds:a.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:n,children:"Amenities"}),e.jsx("textarea",{rows:4,placeholder:"WiFi, Butler Service, Private Pool...",className:o,value:s.amenities,onChange:a=>l({...s,amenities:a.target.value})}),e.jsx("p",{className:"text-[10px] text-stone-400 mt-1 text-right",children:"Comma separated"})]}),e.jsxs("div",{children:[e.jsx("label",{className:n,children:"Image Links"}),e.jsx("textarea",{rows:4,placeholder:"https://...",className:`${o} font-mono text-xs`,value:s.photos,onChange:a=>l({...s,photos:a.target.value})}),e.jsx("p",{className:"text-[10px] text-stone-400 mt-1 text-right",children:"Comma separated"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:n,children:"Marketing Description"}),e.jsx("textarea",{rows:3,className:o,value:s.description,onChange:a=>l({...s,description:a.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-stone-100",children:[e.jsx("button",{type:"button",disabled:i,onClick:()=>p(-1),className:"px-4 py-2 text-sm font-medium text-stone-600 hover:bg-stone-100 rounded-md transition-colors flex items-center gap-2",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 text-sm font-medium text-white bg-stone-900 hover:bg-black rounded-md shadow-sm transition-all flex items-center gap-2 disabled:opacity-50",children:i?"Processing...":e.jsx(e.Fragment,{children:t?"Save Changes":"Create Room"})})]})]})]})})}export{j as A};
