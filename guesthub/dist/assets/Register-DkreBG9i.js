import{g as z,u as L,r as s,j as e,l as R,L as v,s as T,h as D}from"./index-DGXRDi1R.js";import{h as G}from"./login hero-jZBgUiDu.js";const q=()=>{const{checkUser:w}=z(),y=L(),[n,f]=s.useState(1),[i,N]=s.useState(""),[r,S]=s.useState(""),[c,k]=s.useState(""),[o,B]=s.useState(""),[b,C]=s.useState(""),[x,E]=s.useState(!1),[d,P]=s.useState(!1),[g,l]=s.useState(""),[a,u]=s.useState(!1),[A,V]=s.useState(!1),[p,F]=s.useState(!1),[j,W]=s.useState(!1),m=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r),$=async t=>{if(t.preventDefault(),!x){l("Please accept the terms & policies.");return}if(!i||!m){l("Please fill in all fields correctly.");return}try{u(!0),l(""),await T(i,r),f(2)}catch(h){l(h?.response?.data?.error||"Could not send verification code.")}finally{u(!1)}},I=async t=>{if(t.preventDefault(),l(""),c.length!==6){l("Verification code must be 6 digits.");return}if(o.length<6){l("Password too short (min 6 chars).");return}if(o!==b){l("Passwords do not match.");return}try{u(!0),await D({name:i,email:r,password:o,code:c}),await w(),V(!0),setTimeout(()=>{F(!0)},500),setTimeout(()=>{y("/",{replace:!0})},3e3)}catch(h){l(h?.response?.data?.error||"Verification failed. Please check your code."),u(!1)}};return e.jsxs("div",{className:"relative min-h-screen bg-white overflow-hidden font-sans",children:[e.jsx("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1a1a1a] text-white transition-all duration-1000 ease-[cubic-bezier(0.22,1,0.36,1)] ${p?"opacity-100 visible":"opacity-0 invisible pointer-events-none"}`,children:e.jsxs("div",{className:`text-center space-y-6 transition-all duration-1000 delay-300 transform ${p?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("div",{className:"w-20 h-20 border border-white/20 rounded-full flex items-center justify-center mx-auto mb-8 animate-pulse",children:e.jsx("span",{className:"text-3xl",children:"✨"})}),e.jsx("h1",{className:"text-5xl font-serif font-light tracking-wide text-white",children:"Identity Verified"}),e.jsxs("p",{className:"text-lg font-light text-white/60 tracking-[0.2em] uppercase",children:["Welcome to GuestHub, ",i.split(" ")[0]]})]})}),e.jsxs("div",{className:`min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-all duration-700 ease-in-out ${A?"opacity-0 scale-95 blur-sm grayscale":"opacity-100 scale-100"}`,children:[e.jsxs("div",{className:"relative hidden lg:block",children:[e.jsx("img",{src:G,alt:"Resort beachfront",className:"absolute inset-0 h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsx("div",{className:"relative h-full flex items-end",children:e.jsxs("div",{className:"p-12 text-white space-y-4",children:[e.jsxs("h1",{className:"font-display text-5xl font-semibold tracking-tight leading-tight",children:["Secure ",e.jsx("br",{})," Profile Access"]}),e.jsx("p",{className:"max-w-md text-white/80 text-lg font-light",children:"We use multi-factor email verification to ensure the security of your residence and billing information."})]})})]}),e.jsx("div",{className:"flex items-center justify-center px-6 sm:px-10",children:e.jsxs("div",{className:"w-full max-w-md py-10",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("img",{src:R,alt:"GuestHub",className:"h-12 w-auto object-contain"})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"font-display text-3xl tracking-wide font-semibold text-slate-900",children:n===1?"Create Account":"Security Check"}),e.jsx("p",{className:"text-slate-500 text-sm mt-2",children:n===1?"Step 1 of 2: Personal Information":`Step 2 of 2: Code sent to ${r}`})]}),g&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-100 rounded-xl text-red-600 text-sm text-center",children:g}),n===1&&e.jsxs("form",{onSubmit:$,className:"space-y-5 animate-in fade-in slide-in-from-left-4 duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name"}),e.jsx("input",{className:"w-full rounded-xl border border-slate-300 px-4 py-3 outline-none focus:ring-2 focus:ring-[#1E1B4B] transition-colors",placeholder:"e.g. Jane Doe",value:i,onChange:t=>N(t.target.value),autoFocus:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",className:`w-full rounded-xl border px-4 py-3 outline-none focus:ring-2 focus:ring-[#1E1B4B] transition-colors ${j&&!m?"border-red-400":"border-slate-300"}`,placeholder:"you@example.com",value:r,onChange:t=>S(t.target.value),onBlur:()=>W(!0),disabled:a}),j&&!m&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Invalid email address"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[e.jsx("input",{id:"terms",type:"checkbox",checked:x,onChange:t=>E(t.target.checked),className:"w-5 h-5 rounded border-slate-300 text-[#1E1B4B] focus:ring-[#1E1B4B] cursor-pointer",disabled:a}),e.jsxs("label",{htmlFor:"terms",className:"text-sm text-slate-600 cursor-pointer select-none",children:["I agree to the"," ",e.jsx(v,{to:"/policies",className:"text-[#1E1B4B] font-semibold hover:underline",children:"Terms & Policies"})]})]}),e.jsx("button",{type:"submit",disabled:!i||!m||!x||a,className:"w-full rounded-full bg-[#1E1B4B] text-white py-3.5 font-medium text-lg tracking-wide hover:bg-[#151338] disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-indigo-900/20",children:a?"Sending Code...":"Verify & Continue →"})]}),n===2&&e.jsxs("form",{onSubmit:I,className:"space-y-5 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-xs text-blue-800 mb-4",children:["We have sent a 6-digit code to ",e.jsx("strong",{children:r}),". Please enter it below."]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Secure Code"}),e.jsx("input",{className:"w-full rounded-xl border border-slate-300 px-4 py-3 outline-none focus:ring-2 focus:ring-[#1E1B4B] tracking-[0.5em] text-center font-mono text-lg font-bold",placeholder:"000000",maxLength:6,value:c,onChange:t=>k(t.target.value.replace(/[^0-9]/g,"")),autoFocus:!0,disabled:a})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),e.jsx("input",{type:d?"text":"password",className:"w-full rounded-xl border border-slate-300 px-4 py-3 outline-none focus:ring-2 focus:ring-[#1E1B4B]",placeholder:"••••••",value:o,onChange:t=>B(t.target.value),disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Confirm"}),e.jsx("input",{type:d?"text":"password",className:"w-full rounded-xl border border-slate-300 px-4 py-3 outline-none focus:ring-2 focus:ring-[#1E1B4B]",placeholder:"••••••",value:b,onChange:t=>C(t.target.value),disabled:a})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("button",{type:"button",onClick:()=>P(!d),className:"text-xs text-slate-500 hover:text-slate-800 font-medium",children:d?"Hide Passwords":"Show Passwords"}),e.jsx("button",{type:"button",onClick:()=>f(1),className:"text-xs text-slate-500 hover:text-slate-800 underline",children:"Wrong email? Go back"})]}),e.jsx("button",{type:"submit",disabled:c.length!==6||o.length<6||a,className:"w-full rounded-full bg-[#1E1B4B] text-white py-3.5 font-medium text-lg tracking-wide hover:bg-[#151338] disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-indigo-900/20 mt-4",children:a?"Verifying...":"Finalize Account"})]}),n===1&&e.jsxs("p",{className:"mt-8 text-center text-sm text-slate-600",children:["Already have an account?"," ",e.jsx(v,{to:"/login",className:"text-[#1E1B4B] font-semibold hover:underline",children:"Sign in"})]})]})})]})]})};export{q as default};
