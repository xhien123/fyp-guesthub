import{b as v,R as d,j as e,L as l,n as g}from"./index-CtBX9Jbf.js";const N=n=>{switch(n){case"Delivered":case"Completed":return"bg-green-100 text-green-800 border-green-300";case"Ready":return"bg-amber-100 text-amber-800 border-amber-300";case"Preparing":return"bg-blue-100 text-blue-800 border-blue-300";case"Received":return"bg-stone-100 text-stone-800 border-stone-300";default:return"bg-stone-200 text-stone-700 border-stone-300"}},w=()=>{const{id:n}=v(),[s,u]=d.useState(null),[p,c]=d.useState(!0),[x,m]=d.useState(null),a=t=>`${Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",minimumFractionDigits:0}).format(t)}`;if(d.useEffect(()=>{n&&(async()=>{try{c(!0),m(null);const r=await g.get(`/api/orders/${n}`,{withCredentials:!0});u(r.data)}catch(r){m(r?.response?.data?.error||"Failed to load order")}finally{c(!1)}})()},[n]),p)return e.jsx("div",{className:"container max-w-4xl py-20 text-center mx-auto",children:e.jsx("h1",{className:"text-xl font-light tracking-tight text-neutral-800",children:"Retrieving Order Receipt..."})});if(x)return e.jsx("div",{className:"container max-w-4xl py-20 text-center mx-auto",children:e.jsx("h1",{className:"text-xl text-red-600",children:x})});if(!s)return e.jsx("div",{className:"container max-w-4xl py-20 text-center mx-auto",children:e.jsx("h1",{className:"text-xl text-red-600",children:"Order not found."})});const b=s.createdAt?new Date(s.createdAt):null,i=s.items.reduce((t,r)=>t+r.price*r.quantity,0),o=i*.1,h=(i+o)*.08,j=i+o+h,f=t=>t.service==="room_delivery"?"Residence Delivery":t.service==="dine_in"?"Dine-in Reservation":t.method==="room"?"Residence Delivery":"Dine-in Reservation";return e.jsx("div",{className:"bg-neutral-50/50 min-h-screen",children:e.jsxs("div",{className:"container max-w-4xl py-16 space-y-10 mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-stone-300 pb-4",children:[e.jsx("h1",{className:"font-serif text-5xl font-extralight italic text-stone-900",children:"Order Receipt"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{to:`/orders/${s._id}/status`,className:"border border-stone-300 text-stone-700 px-6 py-3 text-sm font-semibold hover:bg-stone-100 transition tracking-wider",children:"View Live Status"}),e.jsx(l,{to:`/orders/${s._id}`,className:"bg-[#112f4c] text-white px-6 py-3 text-sm font-semibold hover:bg-stone-900 transition tracking-wider",children:"View Details"}),e.jsx(l,{to:"/profile",className:"border border-stone-300 text-stone-700 px-6 py-3 text-sm font-semibold hover:bg-stone-100 transition tracking-wider",children:"My Profile"})]})]}),e.jsxs("div",{className:"border border-stone-200 bg-white shadow-xl p-8 space-y-8",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-stone-200 pb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-stone-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("div",{className:"font-medium text-stone-800 text-lg",children:s._id})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`px-4 py-2 text-sm font-semibold border ${N(s.status)}`,children:["Status: ",s.status]})})]}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 border-b border-stone-200 pb-6",children:[e.jsxs("div",{className:"border border-stone-200 p-4 bg-stone-50",children:[e.jsx("div",{className:"text-xs text-stone-500 uppercase tracking-wider",children:"Service Method"}),e.jsx("div",{className:"font-semibold capitalize text-stone-800 text-lg",children:f(s)})]}),e.jsxs("div",{className:"border border-stone-200 p-4 bg-stone-50",children:[e.jsx("div",{className:"text-xs text-stone-500 uppercase tracking-wider",children:"Residence / Table"}),e.jsx("div",{className:"font-semibold text-stone-800 text-lg",children:s.service==="room_delivery"||s.method==="room"?s.roomNumber||"—":"Reserved"})]}),e.jsxs("div",{className:"border border-stone-200 p-4 bg-stone-50",children:[e.jsx("div",{className:"text-xs text-stone-500 uppercase tracking-wider",children:"Placed At"}),e.jsx("div",{className:"font-semibold text-stone-800 text-lg",children:b?b.toLocaleString():"—"})]})]}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-stone-800",children:"Order Items Summary"}),s.items.length===0?e.jsx("p",{className:"text-stone-600",children:"No items in this order."}):e.jsx("ul",{className:"divide-y divide-stone-200",children:s.items.map((t,r)=>e.jsxs("li",{className:"py-4 flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 pr-6",children:[e.jsxs("div",{className:"font-semibold text-stone-800 text-lg",children:[t.name," × ",t.quantity]}),t.notes&&t.notes.trim()!==""&&e.jsxs("div",{className:"mt-1 text-xs text-amber-800 italic bg-amber-50 border-l-2 border-amber-300 px-2 py-1 max-w-full overflow-hidden",children:["Guest Note: ",t.notes]})]}),e.jsx("div",{className:"ml-0 sm:ml-4 font-bold text-xl text-stone-900",children:a(t.price*t.quantity)})]},t._id||`${t.name}-${r}`))}),e.jsxs("div",{className:"border border-stone-300 bg-neutral-50 p-6 space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-stone-800",children:"Total Breakdown"}),e.jsxs("div",{className:"flex justify-between text-base text-stone-600",children:[e.jsx("span",{children:"Subtotal (Items)"}),e.jsx("span",{children:a(i)})]}),e.jsxs("div",{className:"flex justify-between text-base text-stone-600",children:[e.jsx("span",{children:"Service Fee (10%)"}),e.jsx("span",{children:a(o)})]}),e.jsxs("div",{className:"flex justify-between text-base text-stone-600",children:[e.jsx("span",{children:"VAT / Tax (8%)"}),e.jsx("span",{children:a(h)})]}),e.jsxs("div",{className:"mt-4 border-t border-stone-300 pt-3 flex items-center justify-between font-bold text-2xl text-stone-900",children:[e.jsx("span",{children:"Grand Total"}),e.jsx("span",{children:a(j)})]}),e.jsx("div",{className:"text-xs text-stone-500 pt-2",children:"Payment Method: Charge to Residence Account"})]})]}),e.jsx("div",{className:"flex gap-3 pt-6 justify-center",children:e.jsx(l,{to:"/restaurants",className:"bg-[#112f4c] text-white px-8 py-3 text-sm font-semibold hover:bg-stone-900 transition tracking-wider",children:"Order More Food"})})]})})};export{w as default};
