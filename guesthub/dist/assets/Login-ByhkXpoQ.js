import{g as O,u as $,d as F,r,j as e,l as T,L as w,v as U}from"./index-DGXRDi1R.js";import{h as D}from"./login hero-jZBgUiDu.js";const H=({open:n})=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"opacity-70",children:n?e.jsx("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12zm10 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"}):e.jsxs(e.Fragment,{children:[e.jsx("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M3 3l18 18"}),e.jsx("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M10.6 5.1c.45-.07.92-.1 1.4-.1 6.5 0 10 7 10 7a16.7 16.7 0 0 1-4.03 4.95"}),e.jsx("path",{stroke:"currentColor",strokeWidth:"1.5",d:"M6.02 7.01A16.9 16.9 0 0 0 2 12s3.5 7 10 7c1.2 0 2.34-.18 3.4-.5"}),e.jsx("circle",{cx:"12",cy:"12",r:"3.5",stroke:"currentColor",strokeWidth:"1.5"})]})}),q=()=>{const{login:n,checkUser:y}=O(),x=$(),[m]=F(),k=m.get("returnTo")||"/",C=m.get("expired")==="1",[i,S]=r.useState(""),[u,A]=r.useState(""),[h,E]=r.useState(""),[s,p]=r.useState(!1),[o,B]=r.useState(!1),[L,W]=r.useState(!1),[g,b]=r.useState(""),[l,c]=r.useState(!1),[f,P]=r.useState(!1),[j,z]=r.useState(!1),[G,M]=r.useState(""),R=t=>{const a=t.getModifierState?.("CapsLock");W(!!a)},I=async t=>{t.preventDefault(),b("");try{if(c(!0),s){const a=await U(i,h);await y(),v(a)}else{const a=await n(i,u);a?.requireOtp?(p(!0),c(!1)):v(a)}}catch(a){const d=a?.response?.data?.error||a?.message||"Login failed.";b(String(d)),c(!1)}},v=t=>{M(t?.name||"Guest"),P(!0),setTimeout(()=>z(!0),500),setTimeout(()=>{t.role==="admin"?x("/admin",{replace:!0}):x(k,{replace:!0})},2200)},N=({icon:t,label:a})=>e.jsxs("button",{type:"button",onClick:d=>d.preventDefault(),className:"w-full flex items-center gap-3 rounded-full border border-slate-300 px-4 py-2.5 hover:bg-slate-50 transition disabled:opacity-50",disabled:f,children:[e.jsx("span",{className:"text-lg",children:t}),e.jsx("span",{className:"mx-auto text-sm font-medium text-slate-800",children:a})]});return e.jsxs("div",{className:"relative min-h-screen bg-white overflow-hidden",children:[e.jsx("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1a1a1a] text-white transition-all duration-1000 ease-[cubic-bezier(0.22,1,0.36,1)] ${j?"opacity-100 visible":"opacity-0 invisible pointer-events-none"}`,children:e.jsxs("div",{className:`text-center space-y-6 transition-all duration-1000 delay-300 transform ${j?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[e.jsx("div",{className:"w-20 h-20 border border-white/20 rounded-full flex items-center justify-center mx-auto mb-8",children:e.jsx("span",{className:"text-3xl",children:s?"ðŸ›¡ï¸":"ðŸ¨"})}),e.jsx("h1",{className:"text-5xl font-serif font-light tracking-wide text-white",children:s?"Access Granted":"Welcome Back"}),e.jsx("p",{className:"text-xl font-light text-white/60 tracking-[0.2em] uppercase",children:G})]})}),e.jsxs("div",{className:`min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-all duration-700 ease-in-out ${f?"opacity-0 scale-95 blur-sm grayscale":"opacity-100 scale-100"}`,children:[e.jsxs("div",{className:"relative hidden lg:block",children:[e.jsx("img",{src:D,alt:"Resort",className:"absolute inset-0 h-full w-full object-cover"}),e.jsx("div",{className:`absolute inset-0 transition-colors duration-700 ${s?"bg-red-900/40":"bg-black/30"}`}),e.jsx("div",{className:"relative h-full flex items-end",children:e.jsxs("div",{className:"p-10 text-white space-y-2",children:[e.jsx("h1",{className:"font-display text-4xl font-semibold tracking-tight",children:s?"Restricted Access":"Guest Hub Resort"}),e.jsx("p",{className:"max-w-md text-white/90",children:s?"Administrative Control Panel. Authorization Required.":"Sign in to manage your bookings, orders, and preferences."})]})})]}),e.jsx("div",{className:"flex items-center justify-center px-6 sm:px-10",children:e.jsxs("div",{className:"w-full max-w-md py-10",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("img",{src:T,alt:"GuestHub",className:"h-10 w-auto object-contain"})}),e.jsx("h2",{className:`text-center font-display text-[28px] tracking-wide font-semibold mb-6 ${s?"text-red-900":"text-stone-900"}`,children:s?"SECURITY CHECK":"SIGN IN"}),C&&e.jsx("div",{role:"status",className:"mb-4 rounded-xl border border-amber-300 bg-amber-50 p-3 text-amber-900 text-sm",children:"Your session expired. Please sign in again."}),g&&e.jsx("p",{className:"mb-4 text-red-600 text-sm text-center bg-red-50 p-2 rounded-lg border border-red-100",children:g}),e.jsxs("form",{onSubmit:I,className:"space-y-5",children:[s?e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500",children:[e.jsxs("div",{className:"bg-red-50 border border-red-100 p-4 rounded-lg mb-6 text-center",children:[e.jsx("p",{className:"text-red-800 text-sm font-bold mb-1",children:"âš ï¸ Admin Detected"}),e.jsx("p",{className:"text-red-600 text-xs",children:"We have sent a secure verification code to the General Manager's device."})]}),e.jsx("label",{className:"block text-sm font-bold text-red-900 mb-1 text-center uppercase tracking-wider",children:"Enter Security Code"}),e.jsx("input",{type:"text",className:"w-full rounded-xl border-2 border-red-100 bg-red-50/50 px-3 py-4 text-center font-mono text-2xl tracking-[0.5em] font-bold text-red-900 focus:border-red-500 outline-none",placeholder:"000000",maxLength:6,value:h,onChange:t=>E(t.target.value.replace(/[^0-9]/g,"")),autoFocus:!0,disabled:l})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:"Email address"}),e.jsx("input",{type:"email",className:"w-full rounded-xl border border-slate-300 px-3 py-2 outline-none focus:ring-2 focus:ring-[#1E1B4B]",placeholder:"you@example.com",value:i,onChange:t=>S(t.target.value),disabled:l})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm text-slate-700 mb-1",children:"Password"}),e.jsx(w,{to:"/forgot-password",className:"text-sm text-blue-700 hover:underline",children:"Forgot password?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",className:"w-full rounded-xl border border-slate-300 px-3 py-2 pr-12 outline-none focus:ring-2 focus:ring-[#1E1B4B]",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:u,onChange:t=>A(t.target.value),onKeyUp:R,disabled:l}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-2 px-2",onClick:()=>B(!o),children:e.jsx(H,{open:o})})]}),L&&e.jsx("p",{className:"mt-1 text-xs text-amber-700",children:"Caps Lock is on."})]})]}),e.jsx("button",{type:"submit",disabled:l,className:`w-full rounded-full py-3 font-medium text-white transition-all duration-300 shadow-lg ${s?"bg-red-700 hover:bg-red-800 shadow-red-900/20":"bg-[#1E1B4B] hover:opacity-90"}`,children:l?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s?"Verifying...":"Authenticating..."]}):s?"Verify Access":"Log in"}),s&&e.jsx("button",{type:"button",onClick:()=>p(!1),className:"w-full text-xs text-slate-500 hover:text-slate-800",children:"Cancel authentication"})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-8 flex items-center gap-4",children:[e.jsx("div",{className:"h-px flex-1 bg-slate-200"}),e.jsx("span",{className:"text-slate-400 text-xs uppercase tracking-wider",children:"Or continue with"}),e.jsx("div",{className:"h-px flex-1 bg-slate-200"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{icon:e.jsx("span",{children:"ðŸ‡¬"}),label:"Continue with Google"}),e.jsx(N,{icon:e.jsx("span",{children:"ï£¿"}),label:"Continue with Apple"})]}),e.jsxs("p",{className:"mt-8 text-center text-sm text-slate-600",children:["Donâ€™t have an account?"," ",e.jsx(w,{to:"/register",className:"text-[#1E1B4B] font-semibold hover:underline",children:"Register"})]})]})]})})]})]})};export{q as default};
