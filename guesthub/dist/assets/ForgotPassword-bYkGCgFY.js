import{u as y,r as s,j as e,l as B,L as E,i as S,k}from"./index-DGXRDi1R.js";import{h as P}from"./login hero-jZBgUiDu.js";const q=()=>{const b=y(),[r,m]=s.useState(1),[l,p]=s.useState(""),[u,f]=s.useState(""),[i,w]=s.useState(""),[o,n]=s.useState(!1),[x,h]=s.useState(""),[d,a]=s.useState(""),[c,j]=s.useState(!1),v=async t=>{t.preventDefault(),n(!0),a("");try{await S(l),m(2),h(`We have sent a reset code to ${l}`)}catch{a("Failed to process request. Please try again.")}finally{n(!1)}},N=async t=>{if(t.preventDefault(),i.length<6){a("Password must be at least 6 characters");return}n(!0),a("");try{await k({email:l,code:u,newPassword:i}),h("Password reset successfully!"),setTimeout(()=>b("/login"),2e3)}catch(g){a(g?.response?.data?.error||"Invalid code or error resetting password"),n(!1)}};return e.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-2 bg-white font-sans",children:[e.jsxs("div",{className:"relative hidden lg:block",children:[e.jsx("img",{src:P,alt:"Resort Atmosphere",className:"absolute inset-0 h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-[#1E1B4B]/30 mix-blend-multiply"}),e.jsx("div",{className:"relative h-full flex items-end p-12 text-white",children:e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-4xl font-light tracking-wide mb-4",children:"Welcome Back"}),e.jsx("p",{className:"text-white/80 font-light text-lg max-w-md",children:"Recover access to your residence controls and exclusive bookings."})]})})]}),e.jsx("div",{className:"flex items-center justify-center px-6 sm:px-10 py-12",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:B,alt:"GuestHub",className:"h-12 w-auto mx-auto mb-6 object-contain"}),e.jsx("h2",{className:"text-2xl font-serif text-[#1E1B4B] mb-2",children:r===1?"Forgot Password?":"Reset Credentials"}),e.jsx("p",{className:"text-slate-500 text-sm",children:r===1?"Enter your email to receive a secure reset code.":"Enter the code from your email and a new password."})]}),d&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-sm text-center border border-red-100",children:d}),x&&!d&&e.jsx("div",{className:"bg-green-50 text-green-700 p-4 rounded-lg text-sm text-center border border-green-100",children:x}),r===1&&e.jsxs("form",{onSubmit:v,className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:l,onChange:t=>p(t.target.value),className:"w-full rounded-xl border border-slate-300 px-4 py-3 focus:ring-2 focus:ring-[#1E1B4B] outline-none transition-all",placeholder:"you@example.com",required:!0})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-[#1E1B4B] text-white py-3.5 rounded-full font-medium hover:bg-[#151338] transition-all disabled:opacity-50 shadow-lg shadow-indigo-900/10",children:o?"Sending...":"Send Reset Code"})]}),r===2&&e.jsxs("form",{onSubmit:N,className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Verification Code"}),e.jsx("input",{type:"text",value:u,onChange:t=>f(t.target.value.replace(/[^0-9]/g,"")),maxLength:6,className:"w-full rounded-xl border border-slate-300 px-4 py-3 text-center font-mono text-xl tracking-[0.3em] focus:ring-2 focus:ring-[#1E1B4B] outline-none",placeholder:"000000",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:i,onChange:t=>w(t.target.value),className:"w-full rounded-xl border border-slate-300 px-4 py-3 focus:ring-2 focus:ring-[#1E1B4B] outline-none",placeholder:"Min 6 characters",required:!0}),e.jsx("button",{type:"button",onClick:()=>j(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-xs text-slate-500 font-medium hover:text-[#1E1B4B]",children:c?"HIDE":"SHOW"})]})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-[#1E1B4B] text-white py-3.5 rounded-full font-medium hover:bg-[#151338] transition-all disabled:opacity-50 shadow-lg shadow-indigo-900/10",children:o?"Updating...":"Reset Password"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>m(1),className:"text-xs text-slate-500 hover:underline",children:"Wait, I entered the wrong email"})})]}),e.jsx("div",{className:"text-center mt-6 pt-6 border-t border-slate-100",children:e.jsx(E,{to:"/login",className:"text-sm font-medium text-[#1E1B4B] hover:underline",children:"‚Üê Back to Login"})})]})})]})};export{q as default};
